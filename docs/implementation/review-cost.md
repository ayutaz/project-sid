# コスト・実現可能性レビュー

## 概要

本ドキュメントは、Project Sid再現実装の技術調査ドキュメント（01～10）に対するコストと実現可能性の観点からのレビュー結果である。各ドキュメントのコスト見積もりを統合し、整合性をチェックし、現実的な実装計画を提案する。

---

## 1. LLM APIコスト統合試算

> **注**: 本セクションのコスト見積もりは2026年2月時点のAPI価格に基づく。LLM API価格は急速に変動するため、実装開始時に最新価格を確認すること。

### 1.1 LLM API価格前提（2026年2月時点）

| モデル | 入力 ($/1M tokens) | 出力 ($/1M tokens) | 用途 |
|---|---|---|---|
| GPT-4o | $2.50 | $10.00 | Tier1: CC、目標生成、計画、自己省察 |
| GPT-4o-mini | $0.15 | $0.60 | Tier2: 社会認識、発話 |
| Claude Haiku 4.5 | $1.00 | $5.00 | Tier1代替: CC、目標生成等 |
| Gemini 2.0 Flash | $0.10 | $0.40 | Tier3: 記憶要約 |

### 1.2 モジュール別LLM呼び出しパラメータ

各ドキュメントから抽出したモジュール別のLLM利用パターン:

| モジュール | モデルTier | 呼び出し間隔 | 入力トークン | 出力トークン | ソース |
|---|---|---|---|---|---|
| 認知コントローラ(CC) | Tier1 (GPT-4o) | 2-5秒 | ~2,000 | ~500 | Doc03 |
| 目標生成 | Tier1 (GPT-4o) | 30秒 | ~1,500 | ~300 | Doc07 |
| 計画 | Tier1 (GPT-4o) | 30秒 | ~2,000 | ~500 | Doc07 |
| 社会認識 | Tier2 (GPT-4o-mini) | 5-10秒 | ~1,000 | ~200 | Doc06 |
| 発話 | Tier2 (GPT-4o-mini) | 5秒（対話時） | ~800 | ~200 | Doc02 |
| 記憶要約 | Tier3 (Gemini Flash) | 60秒 | ~1,000 | ~300 | Doc04 |
| 自己省察 | Tier1 (GPT-4o) | 30秒 | ~1,500 | ~400 | Doc07 |
| 行動認識 | 非LLM (NN) | 0.5秒 | - | - | Doc07 |
| スキル実行 | 非LLM/ルール | 即時 | - | - | Doc05 |

### 1.3 スケール別コスト試算（1時間あたり）

**ベースライン（全GPT-4o @ $2.50/$10.00、最適化なし）**:

| スケール | LLM APIコスト/時 | 月間コスト（8h/日×20日） |
|---|---|---|
| 10体 | $37.3 | $5,960 |
| 50体 | $185 | $29,600 |
| 500体 | $1,855 | $296,800 |
| 1,000体 | $3,710 | $593,600 |

> **旧価格との比較**: GPT-4oの価格改定（$5.00/$15.00 → $2.50/$10.00）により、ベースラインコストが約50%削減された。

**最適化後（モデルティアリング+キャッシング+バッチ処理）**:

| スケール | LLM APIコスト/時 | 削減率 | 月間コスト（8h/日×20日） |
|---|---|---|---|
| 10体 | $4-8 | 79-89% | $640-1,280 |
| 50体 | $20-40 | 78-89% | $3,200-6,400 |
| 500体 | $130-260 | 86-93% | $20,800-41,600 |
| 1,000体 | $230-460 | 88-94% | $36,800-73,600 |

### 1.3 ドキュメント間のコスト見積もり比較

| 項目 | Doc02 | Doc08 | Doc10 | 整合性 |
|---|---|---|---|---|
| 1000体LLM/時 | $7,420(ベース), $450-900(最適化) | 明示なし | ~$293/run(500体2.5h) | **Warning**: Doc10の$293はDoc02の最適化後$625-1,250と差異あり |
| インフラ/月(500体) | 明示なし | $7,000-9,500 | 明示なし | Doc08のみに記載 |
| インフラ/月(1000体) | 明示なし | $14,000-19,000 | 明示なし | Doc08のみに記載 |
| 記憶DB(500体) | 明示なし | 含む | 明示なし | Doc04: Qdrant62GB、コスト明示なし |

**指摘**: LLMコストとインフラコストが別ドキュメントに分散しており、統合ビューが欠如。

---

## 2. インフラコスト統合

### 2.1 コンポーネント別月額見積もり（Doc08ベース）

| コンポーネント | 10体 | 50体 | 500体 | 1,000体 |
|---|---|---|---|---|
| コンピュート（エージェント） | $50 | $200 | $2,000 | $4,000 |
| Minecraftサーバー | $30 | $50 | $500 | $1,000 |
| Redis | $20 | $50 | $500 | $1,000 |
| PostgreSQL | $20 | $50 | $200 | $400 |
| ベクトルDB (Qdrant) | $0(セルフ) | $50 | $500 | $1,000 |
| ロードバランサー+ネットワーク | $20 | $50 | $300 | $600 |
| 監視・ログ | $30 | $50 | $500 | $1,000 |
| オブジェクトストレージ | $0 | $10 | $100 | $200 |
| **インフラ合計/月** | **$170** | **$510** | **$4,600** | **$9,200** |

### 2.2 LLM + インフラ統合コスト

| スケール | LLMコスト/月（最適化後） | インフラ/月 | **合計/月** |
|---|---|---|---|
| 10体 | $640-1,280 | $170 | **$810-1,450** |
| 50体 | $3,200-6,400 | $510 | **$3,710-6,910** |
| 500体 | $20,800-41,600 | $4,600 | **$25,400-46,200** |
| 1,000体 | $36,800-73,600 | $9,200 | **$46,000-82,800** |

**注**: LLMコストが全体の85-90%を占める。インフラコストは相対的に小さい。2026年2月時点のAPI価格に基づく。

---

## 3. 開発工数見積もり

### 3.1 フェーズ別開発計画

| フェーズ | 期間 | 必要人員 | 人月 | 主要成果物 |
|---|---|---|---|---|
| **Phase 0: MVP** | 2-3ヶ月 | 2-3人 | 5-9 | 単一エージェント+3モジュール(CC, Memory, Skill) |
| **Phase 1: 基盤** | 3-4ヶ月 | 3-5人 | 12-20 | 全モジュール完成、10体で動作確認 |
| **Phase 2: スケール** | 2-3ヶ月 | 3-4人 | 8-12 | 50-500体対応、分散実行基盤 |
| **Phase 3: 文明実験** | 2-3ヶ月 | 2-3人 | 5-9 | 500-1000体、全実験再現 |
| **合計** | **9-13ヶ月** | **ピーク5人** | **30-50人月** |

### 3.2 人件費概算

開発工数30-50人月に対する人件費の概算（日本国内のソフトウェアエンジニア市場価格に基づく）:

| 人材区分 | 月額単価（概算） | 必要人数 | 備考 |
|---|---|---|---|
| テックリード/アーキテクト | 100-150万円 | 1人 | 全期間 |
| シニアエンジニア | 80-120万円 | 1-2人 | Phase 0から |
| エンジニア | 60-90万円 | 1-2人 | Phase 1から |
| MLエンジニア | 80-120万円 | 0-1人 | Phase 1の行動認識NN |

| フェーズ | 人月 | 人件費概算 | LLM+インフラコスト | 合計 |
|---|---|---|---|---|
| Phase 0 (2-3ヶ月) | 5-9 | 400-1,080万円 | $50-100×3ヶ月 ≈ 3-5万円 | 400-1,100万円 |
| Phase 1 (3-4ヶ月) | 12-20 | 960-2,400万円 | $810-1,450×4ヶ月 ≈ 50-90万円 | 1,000-2,500万円 |
| Phase 2 (2-3ヶ月) | 8-12 | 640-1,440万円 | $3,710-6,910×3ヶ月 ≈ 170-310万円 | 810-1,750万円 |
| Phase 3 (2-3ヶ月) | 5-9 | 400-1,080万円 | $25,400-46,200×3ヶ月 ≈ 1,140-2,080万円 | 1,540-3,160万円 |
| **合計** | **30-50** | **2,400-6,000万円** | **1,360-2,490万円** | **3,760-8,490万円** |

> **注**: 人件費は正社員換算の概算であり、フリーランス単価・研究助手等の場合は異なる。為替レートは$1=150円で概算。人件費がプロジェクト総コストの60-70%を占める点に留意。

### 3.3 必要スキルセット

| スキル | Phase 0 | Phase 1 | Phase 2-3 |
|---|---|---|---|
| Python (asyncio) | 必須 | 必須 | 必須 |
| TypeScript (Mineflayer) | - | 必須 | 必須 |
| LLMプロンプトエンジニアリング | 必須 | 必須 | 必須 |
| 分散システム (Redis, Ray) | - | 推奨 | 必須 |
| Kubernetes | - | - | 必須 |
| ML/NN (行動認識) | - | 推奨 | 推奨 |

---

## 4. MVP（最小実行可能構成）

### 4.1 MVP構成

| 項目 | MVP仕様 |
|---|---|
| **エージェント数** | 1-5体 |
| **モジュール** | CC + Memory(WM+STMのみ) + Skill Execution + Action Awareness(ルールベース) |
| **LLMモデル** | GPT-4o-mini（全モジュール共通） |
| **Minecraft** | ローカルサーバー1台 + Mineflayer |
| **インフラ** | ローカルDocker Compose（Redis + PostgreSQL） |
| **評価** | アイテム収集数のみ |

### 4.2 MVPコスト

| 項目 | 月額 |
|---|---|
| LLM API (GPT-4o-mini, 5体) | $50-100 |
| インフラ（ローカル） | $0 |
| **合計** | **$50-100/月** |

### 4.3 MVPで検証すべき仮説

1. PIANOのステートレスモジュール+共有状態設計が実際に動作するか
2. CCのボトルネック+ブロードキャストで言行一致が改善されるか
3. 行動認識モジュール（ルールベース）でハルシネーションループを検出できるか
4. Mineflayer経由のスキル実行が安定するか

---

## 5. コスト削減戦略の実現性評価

| 戦略 | 削減率（Doc02） | 現実的な削減率 | 実現難度 | 評価 |
|---|---|---|---|---|
| **モデルティアリング** | 50-70% | 40-60% | 低 | **Go** — 最も効果的かつ即時適用可能 |
| **プロンプトキャッシング** | 50-90% | 30-50% | 中 | **Go** — OpenAI/Anthropicのネイティブキャッシュ対応 |
| **セマンティックキャッシュ** | 20-40% | 10-25% | 高 | **Caution** — キャッシュヒット率は楽観的。実際にはプロンプトの微妙な差異でヒット率低下 |
| **バッチ処理** | 50% | 30-40% | 中 | **Caution** — リアルタイム性との相反。低速モジュール（目標/計画）のみに限定すべき |
| **ローカルモデル** | 70-90% | 50-80% | 高 | **Phase 2以降で検討** — Phase 0-1はAPI中心で開発し、Phase 2以降でTier2/3モジュール（社会認識、発話、記憶要約）からローカルモデル（Llama 4等）への移行を段階的に検討。GPU要件（A100等）による初期投資コストと品質検証が必要 |

### 過大評価の指摘

- Doc02のセマンティックキャッシュ削減率20-40%は**過大評価**。エージェントごとに文脈が異なるため、実際のキャッシュヒット率は10-15%程度と推定
- Doc02のバッチ処理50%削減は、リアルタイムモジュール（CC, 行動認識）には適用不可。適用可能なモジュール限定で30-40%
- Doc08のインフラコスト$7,000-9,500/月（500体）は、LLMコストと比較して**過小ではない**が、ネットワーク帯域コストが含まれていない可能性

### 過小評価の指摘

- LLM APIの価格下落トレンドは既に反映済み（GPT-4oが$5.00/$15.00 → $2.50/$10.00に下落）。今後も6ヶ月ごとに10-20%の価格下落が期待される
- ローカルモデル（Llama 3/4等）の品質向上が考慮されていない。Tier2/Tier3の置き換えとして現実的

---

## 6. 実現可能性の総合評価

| スケール | 月間コスト | 評価 | コメント |
|---|---|---|---|
| **MVP (1-5体)** | $50-100 | **Go** | 個人開発者でも実施可能 |
| **10体** | $810-1,450 | **Go** | 小規模チームで実施可能 |
| **50体** | $3,710-6,910 | **Caution** | 研究予算が必要。ローカルモデル活用で$2,000-3,500に削減可能 |
| **500体** | $25,400-46,200 | **Caution** | 相当な予算が必要。ローカルモデル+最適化で$10,000-20,000に削減可能性あり |
| **1,000体** | $46,000-82,800 | **Caution→要検討** | 高額だがAPI価格下落により以前より現実的。ローカルモデル併用推奨 |

---

## 7. 推奨コスト最適化戦略ランキング

| 順位 | 戦略 | 期待削減額（500体/月） | 実装時期 |
|---|---|---|---|
| 1 | モデルティアリング（Tier1/2/3分け） | $20,000-35,000 | Phase 0 |
| 2 | プロンプトキャッシング（ネイティブ） | $10,000-20,000 | Phase 0 |
| 3 | ローカルモデル（Tier2/3置換） | $15,000-30,000 | Phase 1 |
| 4 | モジュール実行頻度の最適化 | $5,000-10,000 | Phase 1 |
| 5 | バッチ処理（低速モジュール限定） | $3,000-5,000 | Phase 1 |
| 6 | セマンティックキャッシュ | $2,000-5,000 | Phase 2 |

---

## 8. まとめ

- **LLMコストが全体の85-90%**を占めるため、LLM最適化が最重要
- **MVPは$50-100/月で実現可能**（Go判定）
- **50体以上は研究予算が必要**、500体以上はローカルモデル併用を推奨
- **1,000体の継続実行はAPI価格下落により以前より現実的**になったが、依然としてローカルモデル併用が望ましい
- モデルティアリングとプロンプトキャッシングを最優先で導入すべき
- **開発工数は30-50人月**（9-13ヶ月、ピーク5人）と推定
- **人件費を含む総プロジェクトコスト**: 下記セクション3.3を参照
