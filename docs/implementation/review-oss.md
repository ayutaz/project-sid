# OSSエコシステムレビュー

## 概要

本ドキュメントは、Project Sid再現実装の技術調査ドキュメント（01～10）で言及されたOSSプロジェクト・ライブラリを体系的にレビューし、再利用可能性を評価する。

---

## 1. OSS一覧表

### 1.1 Minecraftエージェント関連

| OSS | ライセンス | 関連Doc | 再利用度 | メンテナンス | 推奨バージョン | 用途 |
|---|---|---|---|---|---|---|
| **Mineflayer** | MIT | 05 | ★★★★★ | 活発 | 4.x (Node.js 18+) | Minecraftボット制御の基盤。必須 |
| mineflayer-pathfinder | MIT | 05 | ★★★★★ | 活発 | 2.x | ボットのナビゲーション |
| mineflayer-collectblock | MIT | 05 | ★★★★☆ | 活発 | 1.x | ブロック収集の自動化 |
| mineflayer-pvp | MIT | 05 | ★★★☆☆ | 中程度 | 1.x | 戦闘機能（文明実験で限定使用） |
| **Voyager** | MIT | 05, 07 | ★★★★☆ | 低下 | main branch | スキルライブラリ設計の参考。コード生成パイプライン |
| **DEPS** | MIT | 07 | ★★★☆☆ | 低 | main branch | Describe-Explain-Plan-Selectパターンの参考 |
| MineDojo | MIT | 05, 09 | ★★☆☆☆ | 低下 | - | ベンチマーク環境。直接再利用は困難 |
| MineRL | MIT | 05 | ★★☆☆☆ | 低 | - | データセット参考。API互換性なし |
| STEVE-1 | MIT | 05 | ★☆☆☆☆ | 低 | - | マルチモーダル参考のみ |
| minecraft-data | MIT | 05 | ★★★★★ | 活発 | latest (MC 1.20+) | アイテム・レシピ・依存ツリーデータ |

### 1.2 LLMフレームワーク

| OSS | ライセンス | 関連Doc | 再利用度 | メンテナンス | 推奨バージョン | 用途 |
|---|---|---|---|---|---|---|
| **LiteLLM** | MIT | 01, 02 | ★★★★★ | 非常に活発 | 1.x (Python 3.12+) | マルチプロバイダLLM呼び出し。開発初期に推奨 |
| LangChain | MIT | 02, 04 | ★★★☆☆ | 非常に活発 | 0.3.x | 記憶・検索チェーンの参考。全体採用は非推奨（過剰抽象化） |
| LlamaIndex | MIT | 04 | ★★★☆☆ | 活発 | 0.11.x | RAG・記憶検索の参考 |
| DSPy | MIT | 02 | ★★☆☆☆ | 活発 | 2.x | プロンプト最適化の参考。PIANOの並行性と相性悪い |
| Semantic Kernel | MIT | 02 | ★★☆☆☆ | 活発 | - | C#/.NET中心。Python版は参考程度 |
| GPTCache | MIT | 02 | ★★★☆☆ | 中程度 | 0.1.x | セマンティックキャッシュの参考実装 |

### 1.3 マルチエージェントフレームワーク

| OSS | ライセンス | 関連Doc | 再利用度 | メンテナンス | 推奨バージョン | 用途 |
|---|---|---|---|---|---|---|
| **AgentScope** | Apache 2.0 | 01 | ★★★☆☆ | 活発 | 0.1.x | 大規模マルチエージェント。参考設計 |
| AutoGen | MIT | - | ★★☆☆☆ | 活発 | 0.4.x | 会話型エージェント。PIANOとは設計思想が異なる |
| CrewAI | MIT | - | ★★☆☆☆ | 活発 | 0.x | 役割ベース。PIANOの動的専門化とは異なる |
| MetaGPT | MIT | - | ★☆☆☆☆ | 活発 | - | SW開発特化。Minecraft環境と無関係 |
| **Mesa** | Apache 2.0 | 09 | ★★★☆☆ | 活発 | 3.x | ABMフレームワーク。評価・分析に活用可能 |

### 1.4 認知アーキテクチャ

| OSS | ライセンス | 関連Doc | 再利用度 | メンテナンス | 用途 |
|---|---|---|---|---|---|
| **LIDA** | GPLv3 | 03 | ★★★☆☆ | 低 | GWT実装の参考。Java実装のためコード再利用は不可 |
| pyactr | MIT | 01, 03 | ★★☆☆☆ | 低 | ACT-Rの参考。PIANOとは設計が大きく異なる |
| Soar | BSD | 03 | ★★☆☆☆ | 低下 | 認知アーキテクチャ参考。直接再利用困難 |

### 1.5 社会シミュレーション

| OSS | ライセンス | 関連Doc | 再利用度 | メンテナンス | 用途 |
|---|---|---|---|---|---|
| **Generative Agents** | Apache 2.0 | 04, 06 | ★★★★☆ | 低 | 記憶システム・社会行動の設計参考 |
| NetworkX | BSD | 06 | ★★★★★ | 非常に活発 | 社会グラフの構築・分析。必須 |

### 1.6 インフラ・DevOps

| OSS | ライセンス | 関連Doc | 再利用度 | メンテナンス | 推奨バージョン | 用途 |
|---|---|---|---|---|---|---|
| **Redis** | SSPL+RSALv2 (7.4+) / BSD (7.2以前) | 01, 04, 08 | ★★★★★ | 非常に活発 | 7.2.x (BSD) | 共有状態、キャッシュ、Pub/Sub。ライセンス変更に注意（後述） |
| **Qdrant** | Apache 2.0 | 04 | ★★★★★ | 非常に活発 | 1.12.x+ | ベクトルDB（記憶システム） |
| **Ray** | Apache 2.0 | 01 | ★★★★☆ | 非常に活発 | 2.40+ | 分散実行フレームワーク |
| Prometheus | Apache 2.0 | 08, 10 | ★★★★★ | 非常に活発 | 2.x / 3.x | メトリクス収集 |
| Grafana | AGPLv3 | 08, 09, 10 | ★★★★★ | 非常に活発 | 11.x+ | 可視化ダッシュボード |
| Grafana Loki | AGPLv3 | 10 | ★★★★☆ | 活発 | 3.x | ログ集約 |
| MLflow | Apache 2.0 | 10 | ★★★★☆ | 活発 | 2.x | 実験管理 |
| Hydra | MIT | 10 | ★★★★☆ | 活発 | 1.3.x | 設定管理 |
| Pufferfish | GPLv3 | 05 | ★★★★☆ | 活発 | MC 1.20+ | 最適化Minecraftサーバー |
| Velocity | GPLv3 | 05 | ★★★★☆ | 活発 | 3.x | MCサーバープロキシ |
| **FastAPI** | MIT | 02, 08 | ★★★★★ | 非常に活発 | 0.115.x+ | REST APIフレームワーク |

---

## 2. 再利用推奨ランキング

### Tier 1: 必須採用（そのまま使用）

| 順位 | OSS | 理由 |
|---|---|---|
| 1 | **Mineflayer + プラグイン** | Minecraft制御の唯一の実用的選択肢 |
| 2 | **Redis** | 共有状態、キャッシュ、Pub/Sub。代替困難 |
| 3 | **NetworkX** | 社会グラフの標準ライブラリ |
| 4 | **LiteLLM** | LLMマルチプロバイダ対応。初期開発で必須 |
| 5 | **minecraft-data** | アイテム・レシピデータ。独自収集は非効率 |

### Tier 2: 強く推奨（主要コンポーネントとして使用）

| 順位 | OSS | 理由 |
|---|---|---|
| 6 | **Qdrant** | ベクトルDB。Doc04の推奨と一致 |
| 7 | **Ray** | 分散実行。500体以上で必須 |
| 8 | **Prometheus + Grafana** | 監視の標準。代替なし |
| 9 | **MLflow + Hydra** | 実験管理。再現性保証に必須 |

### Tier 3: 参考設計（コードは再利用せず設計を参照）

| 順位 | OSS | 参照対象 |
|---|---|---|
| 10 | **Voyager** | スキルライブラリ設計、コード生成パイプライン |
| 11 | **Generative Agents** | 記憶システム設計、反省メカニズム |
| 12 | **LIDA** | GWT実装パターン、認知サイクル |
| 13 | **DEPS** | Plan-Selectパターン |
| 14 | **AgentScope** | 大規模エージェント管理パターン |

---

## 3. 独自実装が必須な部分

| コンポーネント | 理由 | 推定工数 |
|---|---|---|
| **認知コントローラ(CC)** | PIANOのGWT型ボトルネック+ブロードキャストは既存OSSに該当なし | 大 |
| **モジュールスケジューラ** | 非均一速度での並列モジュール実行は独自設計が必要 | 中 |
| **行動認識NN** | ハルシネーション検出の専用ニューラルネット | 大 |
| **社会認識モジュール** | 感情追跡+好感度推定+集合知は独自アルゴリズム | 中 |
| **文明的ベンチマーク** | 役割エントロピー、税遵守率、ミーム伝播の評価パイプライン | 中 |
| **Mineflayer-PIANOブリッジ** | TypeScript(Mineflayer)とPython(PIANOランタイム)間の接続 | 中 |

---

## 4. ローカルモデルの導入方針

> **統一見解**: Phase 0-1はLLM API中心で開発し、Phase 2以降でローカルモデルへの段階的移行を検討する。

| フェーズ | ローカルモデル方針 | 理由 |
|---|---|---|
| Phase 0-1 | **API専用** | 品質の安定性を優先。プロンプト設計・評価基盤の確立に集中 |
| Phase 2 | **Tier2/3からローカル移行開始** | 社会認識、発話、記憶要約をLlama 4/Gemma等に置き換え検証 |
| Phase 3 | **Tier2/3はローカル、Tier1はAPI** | 500体以上ではTier2/3のAPI呼び出しがコスト支配的。ローカル化で50-70%削減 |

ローカルモデルの実行基盤としてvLLMまたはOllamaを推奨。GPU要件はTier2/3の同時リクエスト数に依存するが、A100 40GB×1-2台で50体規模、A100 80GB×4台で500体規模を想定。

---

## 5. ライセンス互換性

### 注意すべきライセンス

| OSS | ライセンス | 影響 |
|---|---|---|
| LIDA | **GPLv3** | コードの直接利用は不可（GPLv3の伝播性）。設計参照のみ |
| Grafana | **AGPLv3** | SaaS提供時はソース公開義務が発生（ネットワーク越しのサービス提供がトリガー）。内部利用・研究用途では問題なし |
| Pufferfish | **GPLv3** | バイナリ利用のみ。改変時はソース公開義務 |
| Velocity | **GPLv3** | 同上 |
| Redis 7.4+ | **SSPL+RSALv2** | 2024年3月にBSDからライセンス変更。競合サービス提供でなければ問題ないが、BSD版の7.2.xを推奨。代替としてValkey（Linux Foundation支援、BSD-3-Clause）への移行も検討可能 |

### 推奨ライセンス戦略

- 再現実装全体は **MIT** または **Apache 2.0** で公開
- GPLv3コンポーネント（Pufferfish, Velocity）は外部依存として利用し、本体コードに含めない
- LIDAのGWT設計は参考にするが、コードの直接流用は避ける
- Redisは7.2.x（BSD）を推奨。将来的にValkey（BSD-3-Clause）への移行パスを確保

---

## 6. まとめ

- **必須採用OSS**: Mineflayer, Redis, NetworkX, LiteLLM, minecraft-data（5件）
- **強く推奨OSS**: Qdrant, Ray, Prometheus+Grafana, MLflow+Hydra（4件）
- **参考設計OSS**: Voyager, Generative Agents, LIDA, DEPS, AgentScope（5件）
- **独自実装必須**: CC、モジュールスケジューラ、行動認識NN、社会認識、文明ベンチマーク、Mineflayerブリッジ（6件）
- 既存OSSを最大限活用することで、**開発工数を30-40%削減**できると推定
- ライセンス面では、GPLv3のLIDA・Pufferfish・Velocityに注意が必要
